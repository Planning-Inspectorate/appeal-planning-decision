{% extends layoutTemplate %}
{% from "govuk/components/error-summary/macro.njk" import govukErrorSummary %}
{% from "govuk/components/input/macro.njk" import govukInput %}
{% from "govuk/components/fieldset/macro.njk" import govukFieldset %}
{% from "govuk/components/button/macro.njk" import govukButton %}
{% from "macros/appeal-details.njk" import appealDetails %}
{% set title = question.pageTitle + " - " + journeyTitle + " - GOV.UK" %}
{% block pageTitle %}
	{{ "Error: " + title if errors else title }}
{% endblock %}
{% block before_content %}
	<div class="govuk-grid-row">
		<div class="govuk-grid-column-two-thirds">
			{% if errorSummary %}
				{{ govukErrorSummary({
                titleText: "There is a problem",
                errorList: errorSummary,
                attributes: {"data-cy": "error-wrapper"}
            }) }}
			{% endif %}
		</div>
	</div>
	{{ super() }}
{% endblock before_content %}
{% block content %}
	<div class="govuk-grid-row">
		<div class="govuk-grid-column-two-thirds">
			<form action="" method="post" novalidate>

			<input type="hidden" name="_csrf" value="{{ _csrf }}">
				{% if appeal %}
					<span class="govuk-caption-xl">Appeal {{appeal.caseReference}}</span>
				{% endif %}
				{% call govukFieldset({
                    legend: {
                        text: question.question,
                        classes: "govuk-fieldset__legend--l",
                        isPageHeading: true
                    }
                }) %}

				{% if appeal %}
					{{ appealDetails(appeal) }}
					<hr class="govuk-section-break govuk-section-break--m govuk-section-break--visible">
				{% endif %}

				{% if question.html %}
					{% include question.html ignore missing %}
				{% endif %}

				{% if question.description %}
					<p class="govuk-body">
						{{ question.description }}
					</p>
				{% endif %}

				{% endcall %}

				{{ govukButton({
                    text: "Continue",
                    type: "submit",
                    attributes: { "data-cy":"button-save-and-continue"}
                }) }}
			</form>
		</div>
	</div>
{% endblock %}
