{% extends "layouts/lpa-dashboard/main-no-back-link.njk" %}
{% from "govuk/components/button/macro.njk" import govukButton %}
{% from "govuk/components/tabs/macro.njk" import govukTabs %}
{% from "govuk/components/table/macro.njk" import govukTable %}

{% set title="Manage your appeals - Manage appeals - GOV.UK" %}

{% set toDoHtml %}
<div>
      <table class="govuk-table govuk-!-margin-top-3">
        <caption class="govuk-table__caption govuk-table__caption--l">To do</caption>
        <thead class="govuk-table__head">
          <tr class="govuk-table__row">
            <th scope="col" class="govuk-table__header">Appeal number</th>
            <th scope="col" class="govuk-table__header">Address</th>
						<th scope="col" class="govuk-table__header">Appeal type</th>
            <th scope="col" class="govuk-table__header">Deadline</th>
            <th scope="col" class="govuk-table__header govuk-table__header--numeric">Due in</th>
            <th scope="col" class="govuk-table__header govuk-table__header--numeric">To do</th>
          </tr>
        </thead>
        <tbody class="govuk-table__body">
            {% for item in appealsCaseData %}
              <tr class="govuk-table__row">
                <td class="govuk-table__cell">
                  <a href="{{appealDetailsLink}}/{{item.caseReferenceSlug}}" class="govuk-link">
                   {{item.appealNumber}}
                  </a>
                </td>
                <td class="govuk-table__cell">{{item.address}}</td>
								<td class="govuk-table__cell">{{item.appealType.short}}</td>
                <td class="govuk-table__cell">
                  {% if item.deadline == 'NEW' %}
                  {% else %}
										{{item.deadline | date('D MMMM YYYY') }}
									{% endif %}
								</td>
                <td class="govuk-table__cell govuk-table__cell--numeric">
									{% if item.deadline == 'NEW' %}
                    <strong class='govuk-tag govuk-tag--green'>NEW</strong>
									{% elif item.dueInDays == 'OVERDUE' %}
                    <strong class='govuk-tag govuk-tag--red'>OVERDUE</strong>
                  {% else %}
                    {{item.dueInDays}}
                  {% endif %}
                </td>
                <td class="govuk-table__cell govuk-table__cell--numeric">
                   {% if item.displayQuestionnaire %}
                      <a href="{{appealQuestionnaireLink}}/{{item.caseReferenceSlug}}" class="govuk-link">
                        Questionnaire
                        <span class="govuk-visually-hidden"> for {{item.caseReference}}</span>
                      </a>
                   {% endif %}
									 {% if (not item.displayQuestionnaire) and (item.displayStatement) %}
                      <a href="{{appealQuestionnaireLink}}/{{item.caseReferenceSlug}}" class="govuk-link">
                        Statement
                        <span class="govuk-visually-hidden"> for {{item.caseReference}}</span>
                      </a>
                   {% endif %}
									 {% if item.displayFinalComment %}
                      <a href="{{appealQuestionnaireLink}}/{{item.caseReferenceSlug}}" class="govuk-link">
                        Final comment
                        <span class="govuk-visually-hidden"> for {{item.caseReference}}</span>
                      </a>
                   {% endif %}
									 {% if item.displayProofsOfEvidence %}
                      <a href="{{appealQuestionnaireLink}}/{{item.caseReferenceSlug}}" class="govuk-link">
                        Proof of Evidence
                        <span class="govuk-visually-hidden"> for {{item.caseReference}}</span>
                      </a>
                   {% endif %}
                </td>
              </tr>
            {% endfor %}

        </tbody>
      </table>
   </div>
{% endset %}

{% set waitingForReviewHtml %}
<h2 class="govuk-heading-l">Waiting for review</h2>
{{ govukTable({
  head: [
    {
      text: "Appeal number"
    },
    {
      text: "Address"
    },
    {
      text: "Appeal type"
    },
		{
      text: "Status"
    }
  ],
  rows: [
    [
      {
        text: "1"
      },
      {
        text: "Somewhere"
      },
      {
        text: "S78"
      },
			{
        text: "Status"
      }
    ]
  ]
}) }}
{% endset -%}

{% block pageTitle %}
  {{ title }}
{% endblock %}

{% block content %}
  <div class="govuk-grid-row">
    <div class="govuk-grid-column-two-thirds">
      <h1 class="govuk-heading-xl">
        <span class="govuk-caption-xl">
          {{lpaName}}
        </span>
        Manage your appeals
      </h1>
      <p class="govuk-body">
        <a href="{{addOrRemoveLink}}" class="govuk-link">Add and remove users</a>
      </p>
    </div>
  </div>

	<div>
		{{ govukTabs({
  		items: [
    		{
      		label: "To do",
      		id: "to-do",
     			panel: {
        		html: toDoHtml
      		}
    		},
				{
					label: "Waiting for review",
					id: "waiting-for-review",
					panel: {
						html: waitingForReviewHtml
					}
				}
  		]
		}) }}
	</div>

{% endblock %}
