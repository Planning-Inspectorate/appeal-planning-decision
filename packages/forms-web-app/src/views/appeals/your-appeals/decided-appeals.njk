{% extends "layouts/no-banner-link/main.njk" %}

 {% from "govuk/components/error-summary/macro.njk" import govukErrorSummary %}
 {% from "govuk/components/button/macro.njk" import govukButton %}
 {% from "govuk/components/radios/macro.njk" import govukRadios %}
 {% from "govuk/components/tabs/macro.njk" import govukTabs %}
 {% from "govuk/components/table/macro.njk" import govukTable %}

 {% set title="
 Decided appeals - Appeal a planning decision - GOV.UK" %}

{% block backButton %}
  {{ govukBackLink({
    text: "Back to your appeals",
    href: "/appeals/your-appeals",
    attributes: {
      'data-cy': 'back'
    }
  }) }}
{% endblock %}

 {% block pageTitle %}
   {{ title }}
 {% endblock %}

 {% block content %}
   <div class="govuk-grid-row">
     <div class="govuk-grid-column-full">

       {% if errorSummary %}
         {{ govukErrorSummary({
           titleText: "There is a problem",
           errorList: errorSummary
         }) }}
       {% endif %}


        <h1 class="govuk-heading-l">Decided appeals</h1>
        <table class="govuk-table govuk-!-margin-top-3">
          <caption class="govuk-table__caption govuk-table__caption--l">To do</caption>
          <thead class="govuk-table__head">
            <tr class="govuk-table__row">
              <th scope="col" class="govuk-table__header">Appeal number</th>
              <th scope="col" class="govuk-table__header govuk-!-width-one-half">Site address</th>
              <th scope="col" class="govuk-table__header">Decision date</th>
              <th scope="col" class="govuk-table__header govuk-!-width-one-third">Appeal type</th>
              <th scope="col" class="govuk-table__header govuk-!-width-one-third">Decision</th>
            </tr>
          </thead>
          <tbody class="govuk-table__body">
              {% for item in appeals %}
                <tr class="govuk-table__row">
                  <td class="govuk-table__cell">
                    <a href="#" class="govuk-link">
                      {{item.caseReference}}
                    </a>
                  </td>
                  <td class="govuk-table__cell">
                    {{ item.address }}
                  </td>
                  <td class="govuk-table__cell">
                      {{item.originalCaseDecisionDate | date('D MMM YYYY') }}
                  </td>
                  <td class="govuk-table__cell">{{item.appealType}}</td>
                  <td class="govuk-table__cell">
                    {% if item.decisionOutcome == 'allowed'%}
                      {% set tagClass = "govuk-tag--green" %}
                    {% elif item.decisionOutcome == 'dismissed'%}
                      {% set tagClass = "govuk-tag--orange" %}
                    {% elif item.decisionOutcome == 'allowed in part'%}
                      {% set tagClass = "govuk-tag--yellow" %}
                    {% else %}
                      {% set tagClass = "govuk-tag--grey"%}
                    {% endif %}
                    <strong class='govuk-tag {{ tagClass }}'>{{ item.decisionOutcome | capitalize }}</strong>
                  </td>
                </tr>
              {% endfor %}

          </tbody>
        </table>
     </div>
   </div>
 {% endblock %} 