{% extends "../layouts/can-use-service/main.njk" %}
{% from "govuk/components/summary-list/macro.njk" import govukSummaryList %}
{% from "../macros/summary-field.njk" import summaryField %}
{% from "../macros/array-new-line.njk" import arrayToNewLine %}
{% if not hideListedBuilding %}
    {% set listedBuildingRow =
		{
			key: {
				text: "Is your appeal about a listed building?"
			},
			value: {
				text: summaryField(isListedBuilding, { 'data-cy': "listed-building" })
			},
			actions: {
				items: [
					{
						href: "/before-you-start/listed-building",
						text: "Change",
						visuallyHiddenText: "Is your appeal about a listed building?",
						attributes: { "data-cy":"listedBuilding"}
					}
				]
			}
		} %}
{% else %}
    {% set listedBuildingRow = null %}
{% endif %}
{% if applicationAbout %}
    {% set applicationAboutRow = {
		key: {
			text: "Application about?"
		},
		value: {
			text: arrayToNewLine(applicationAbout)
		},
		actions: {
			items: [
				{
					href: "/before-you-start/planning-application-about",
					text: "Change",
					visuallyHiddenText: "Application about?",
					attributes: { "data-cy":"applicationAbout"}
				}
			]
		}
	} %}
{% else %}
    {% set applicationAboutRow = null %}
{% endif %}
{% if not hideGrantedRefused %}
    {% set grantedRefusedRow = {
		key: {
			text: "Was your application granted or refused?"
		},
		value: {
			text: summaryField(applicationDecision, { 'data-cy': "application-decision" })
		},
		actions: {
			items: [
				{
					href: "/before-you-start/granted-or-refused",
					text: "Change",
					visuallyHiddenText: "Was your application granted or refused?",
					attributes: { "data-cy":"applicationDecision"}
				}
			]
		}
	} %}
{% else %}
    {% set grantedRefusedRow = null %}
{% endif %}
{% if not hideDecisionDate %}
    {% set decisionDateRow = {
		key: {
			text: dateOfDecisionLabel
		},
		value: {
			text: summaryField(decisionDate, { 'data-cy': "decision-date" })
		},
		actions: {
			items: [
				{
					href: "/before-you-start/decision-date",
					text: "Change",
					visuallyHiddenText: dateOfDecisionLabel,
					attributes: { "data-cy":"decisionDate"}
				}
			]
		}
	} %}
{% else %}
    {% set decisionDateRow = null %}
{% endif %}
{% block deadlineDateInfo %}
    {% if not hideDecisionDate %}
        {{ super() }}
    {% endif %}
{% endblock %}
{% block canUseServiceSummaryList %}
    {{ govukSummaryList({
		classes: "govuk-summary-list govuk-!-margin-bottom-9",
		rows: [
			{
				key: {
					text: "Local planning authority"
				},
				value: {
					text: summaryField(appealLPD, { 'data-cy': "local-planning-department" })
				},
				actions: {
					items: [
						{
							href: changeLpaUrl,
							text: "Change",
							visuallyHiddenText: "Local planning authority",
							attributes: { "data-cy":"localPlanningDepartment"}
						}
					]
				}
			},
			{
				key: {
					text: "Have you received an enforcement notice?"
				},
				value: {
					text: summaryField(enforcementNotice, { 'data-cy': "enforcement-notice" })
				},
				actions: {
					items: [
						{
							href: "/before-you-start/enforcement-notice",
							text: "Change",
							visuallyHiddenText: "Have you received an enforcement notice?",
							attributes: { "data-cy":"enforcementNotice"}
						}
					]
				}
			},
			{
              key: {
                text: "Application number"
              },
              value: {
                text: summaryField(planningApplicationNumber, { 'data-cy': "application-number" })
              },
              actions: {
                items: [
                  {
                    href: "/before-you-start/application-number",
                    text: "Change",
                    visuallyHiddenText: "Application number",
                    attributes: { "data-cy":"applicationNumber"}
                  }
                ]
              }
            } if planningApplicationNumber,
			{
				key: {
				text: "Type of application"
			},
				value: {
				text: summaryField(applicationType, { 'data-cy': "application-type" })
			},
				actions: {
					items: [
						{
							href: "/before-you-start/type-of-planning-application",
							text: "Change",
							visuallyHiddenText: "Type of application",
							attributes: { "data-cy":"applicationType"}
						}
					]
				}
			},
			listedBuildingRow,
			applicationAboutRow,
			grantedRefusedRow,
			decisionDateRow
		]
	}) }}
{% endblock %}
