/*
  Warnings:

  - You are about to drop the column `LPAApplicationReference` on the `AppealCase` table. All the data in the column will be lost.
  - You are about to drop the column `LPAName` on the `AppealCase` table. All the data in the column will be lost.
  - You are about to drop the column `addAffectedListedBuilding` on the `AppealCase` table. All the data in the column will be lost.
  - You are about to drop the column `addChangedListedBuilding` on the `AppealCase` table. All the data in the column will be lost.
  - You are about to drop the column `addNearbyAppeal` on the `AppealCase` table. All the data in the column will be lost.
  - You are about to drop the column `affectedListedBuildingNumber` on the `AppealCase` table. All the data in the column will be lost.
  - You are about to drop the column `affectsListedBuilding` on the `AppealCase` table. All the data in the column will be lost.
  - You are about to drop the column `appealStatus` on the `AppealCase` table. All the data in the column will be lost.
  - You are about to drop the column `appealTypeName` on the `AppealCase` table. All the data in the column will be lost.
  - You are about to drop the column `appealValidDate` on the `AppealCase` table. All the data in the column will be lost.
  - You are about to drop the column `appealWithdrawnDate` on the `AppealCase` table. All the data in the column will be lost.
  - You are about to drop the column `appellantCasePublished` on the `AppealCase` table. All the data in the column will be lost.
  - You are about to drop the column `appellantCompanyName` on the `AppealCase` table. All the data in the column will be lost.
  - You are about to drop the column `appellantFirstName` on the `AppealCase` table. All the data in the column will be lost.
  - You are about to drop the column `appellantGreenBelt` on the `AppealCase` table. All the data in the column will be lost.
  - You are about to drop the column `appellantLastName` on the `AppealCase` table. All the data in the column will be lost.
  - You are about to drop the column `appellantLinkedCase` on the `AppealCase` table. All the data in the column will be lost.
  - You are about to drop the column `appellantPhoneNumber` on the `AppealCase` table. All the data in the column will be lost.
  - You are about to drop the column `appellantPreferHearingDetails` on the `AppealCase` table. All the data in the column will be lost.
  - You are about to drop the column `appellantPreferInquiryDetails` on the `AppealCase` table. All the data in the column will be lost.
  - You are about to drop the column `appellantProofEvidenceSubmitted` on the `AppealCase` table. All the data in the column will be lost.
  - You are about to drop the column `appellantSiteAccess` on the `AppealCase` table. All the data in the column will be lost.
  - You are about to drop the column `appellantSiteAccessDetails` on the `AppealCase` table. All the data in the column will be lost.
  - You are about to drop the column `appellantSiteSafety` on the `AppealCase` table. All the data in the column will be lost.
  - You are about to drop the column `appellantSiteSafetyDetails` on the `AppealCase` table. All the data in the column will be lost.
  - You are about to drop the column `caseDecisionDate` on the `AppealCase` table. All the data in the column will be lost.
  - You are about to drop the column `caseDecisionPublished` on the `AppealCase` table. All the data in the column will be lost.
  - You are about to drop the column `casePublished` on the `AppealCase` table. All the data in the column will be lost.
  - You are about to drop the column `caseReceived` on the `AppealCase` table. All the data in the column will be lost.
  - You are about to drop the column `changedListedBuildingNumber` on the `AppealCase` table. All the data in the column will be lost.
  - You are about to drop the column `changesListedBuilding` on the `AppealCase` table. All the data in the column will be lost.
  - You are about to drop the column `contactCompanyName` on the `AppealCase` table. All the data in the column will be lost.
  - You are about to drop the column `contactFirstName` on the `AppealCase` table. All the data in the column will be lost.
  - You are about to drop the column `contactLastName` on the `AppealCase` table. All the data in the column will be lost.
  - You are about to drop the column `correctAppealType` on the `AppealCase` table. All the data in the column will be lost.
  - You are about to drop the column `costsAppliedForIndicator` on the `AppealCase` table. All the data in the column will be lost.
  - You are about to drop the column `decision` on the `AppealCase` table. All the data in the column will be lost.
  - You are about to drop the column `developmentDescriptionDetails` on the `AppealCase` table. All the data in the column will be lost.
  - You are about to drop the column `doesAffectAScheduledMonument` on the `AppealCase` table. All the data in the column will be lost.
  - You are about to drop the column `greenBelt` on the `AppealCase` table. All the data in the column will be lost.
  - You are about to drop the column `identifiedOwners` on the `AppealCase` table. All the data in the column will be lost.
  - You are about to drop the column `informedOwners` on the `AppealCase` table. All the data in the column will be lost.
  - You are about to drop the column `isAppellant` on the `AppealCase` table. All the data in the column will be lost.
  - You are about to drop the column `lpaQuestionnairePublished` on the `AppealCase` table. All the data in the column will be lost.
  - You are about to drop the column `lpaQuestionnaireSubmitted` on the `AppealCase` table. All the data in the column will be lost.
  - You are about to drop the column `nearbyAppealReference` on the `AppealCase` table. All the data in the column will be lost.
  - You are about to drop the column `nearbyAppeals` on the `AppealCase` table. All the data in the column will be lost.
  - You are about to drop the column `newConditions` on the `AppealCase` table. All the data in the column will be lost.
  - You are about to drop the column `notificationMethod` on the `AppealCase` table. All the data in the column will be lost.
  - You are about to drop the column `onApplicationDate` on the `AppealCase` table. All the data in the column will be lost.
  - You are about to drop the column `originalCaseDecisionDate` on the `AppealCase` table. All the data in the column will be lost.
  - You are about to drop the column `outcome` on the `AppealCase` table. All the data in the column will be lost.
  - You are about to drop the column `procedure` on the `AppealCase` table. All the data in the column will be lost.
  - You are about to drop the column `questionnaireDueDate` on the `AppealCase` table. All the data in the column will be lost.
  - You are about to drop the column `questionnaireReceived` on the `AppealCase` table. All the data in the column will be lost.
  - You are about to drop the column `receiptDate` on the `AppealCase` table. All the data in the column will be lost.
  - You are about to drop the column `startDate` on the `AppealCase` table. All the data in the column will be lost.
  - You are about to drop the column `updateDevelopmentDescription` on the `AppealCase` table. All the data in the column will be lost.
  - You are about to drop the column `uploadConservation` on the `AppealCase` table. All the data in the column will be lost.
  - You are about to drop the column `uploadConsultationResponses` on the `AppealCase` table. All the data in the column will be lost.
  - You are about to drop the column `uploadDefinitiveMapStatement` on the `AppealCase` table. All the data in the column will be lost.
  - You are about to drop the column `uploadDevelopmentPlanPolicies` on the `AppealCase` table. All the data in the column will be lost.
  - You are about to drop the column `uploadEmergingPlan` on the `AppealCase` table. All the data in the column will be lost.
  - You are about to drop the column `uploadEnvironmentalStatement` on the `AppealCase` table. All the data in the column will be lost.
  - You are about to drop the column `uploadInfrastructureLevy` on the `AppealCase` table. All the data in the column will be lost.
  - You are about to drop the column `uploadLettersEmails` on the `AppealCase` table. All the data in the column will be lost.
  - You are about to drop the column `uploadLpaProofEvidence` on the `AppealCase` table. All the data in the column will be lost.
  - You are about to drop the column `uploadLpaRebuttal` on the `AppealCase` table. All the data in the column will be lost.
  - You are about to drop the column `uploadLpaStatementDocuments` on the `AppealCase` table. All the data in the column will be lost.
  - You are about to drop the column `uploadLpaWitnessEvidence` on the `AppealCase` table. All the data in the column will be lost.
  - You are about to drop the column `uploadLpaWitnessTimings` on the `AppealCase` table. All the data in the column will be lost.
  - You are about to drop the column `uploadOtherPolicies` on the `AppealCase` table. All the data in the column will be lost.
  - You are about to drop the column `uploadPlanningOfficerReport` on the `AppealCase` table. All the data in the column will be lost.
  - You are about to drop the column `uploadPressAdvert` on the `AppealCase` table. All the data in the column will be lost.
  - You are about to drop the column `uploadRepresentations` on the `AppealCase` table. All the data in the column will be lost.
  - You are about to drop the column `uploadScreeningDirection` on the `AppealCase` table. All the data in the column will be lost.
  - You are about to drop the column `uploadScreeningOpinion` on the `AppealCase` table. All the data in the column will be lost.
  - You are about to drop the column `uploadSiteNotice` on the `AppealCase` table. All the data in the column will be lost.
  - You are about to drop the column `uploadSupplementaryPlanningDocs` on the `AppealCase` table. All the data in the column will be lost.
  - You are about to drop the column `uploadTreePreservationOrder` on the `AppealCase` table. All the data in the column will be lost.
  - You are about to drop the column `uploadWhoNotified` on the `AppealCase` table. All the data in the column will be lost.
  - You are about to drop the column `appealCaseId` on the `SubmissionLinkedCase` table. All the data in the column will be lost.
  - Added the required column `caseCreatedDate` to the `AppealCase` table without a default value. This is not possible if the table is not empty.
  - Added the required column `caseStatus` to the `AppealCase` table without a default value. This is not possible if the table is not empty.
  - Added the required column `caseSubmittedDate` to the `AppealCase` table without a default value. This is not possible if the table is not empty.
  - Made the column `siteAddressTown` on table `AppealCase` required. This step will fail if there are existing NULL values in that column.
  - Made the column `scheduledMonument` on table `AppealCase` required. This step will fail if there are existing NULL values in that column.

*/
BEGIN TRY

BEGIN TRAN;

-- DropForeignKey
ALTER TABLE [dbo].[SubmissionLinkedCase] DROP CONSTRAINT [SubmissionLinkedCase_appealCaseId_fkey];

-- AlterTable
ALTER TABLE [dbo].[AppealCase] ALTER COLUMN [appealTypeCode] NVARCHAR(1000) NULL;
ALTER TABLE [dbo].[AppealCase] ALTER COLUMN [siteAddressTown] NVARCHAR(1000) NOT NULL;
ALTER TABLE [dbo].[AppealCase] ALTER COLUMN [knowsOtherOwners] NVARCHAR(1000) NULL;
ALTER TABLE [dbo].[AppealCase] ALTER COLUMN [scheduledMonument] BIT NOT NULL;

ALTER TABLE [dbo].[AppealCase] DROP CONSTRAINT [AppealCase_appellantCasePublished_df]
ALTER TABLE [dbo].[AppealCase] DROP CONSTRAINT [AppealCase_appellantFirstName_df]
ALTER TABLE [dbo].[AppealCase] DROP CONSTRAINT [AppealCase_appellantLastName_df]
ALTER TABLE [dbo].[AppealCase] DROP CONSTRAINT [AppealCase_appellantProofEvidenceSubmitted_df]
ALTER TABLE [dbo].[AppealCase] DROP CONSTRAINT [AppealCase_caseDecisionPublished_df]
ALTER TABLE [dbo].[AppealCase] DROP CONSTRAINT [AppealCase_casePublished_df]
ALTER TABLE [dbo].[AppealCase] DROP CONSTRAINT [AppealCase_lpaQuestionnairePublished_df]
ALTER TABLE [dbo].[AppealCase] DROP CONSTRAINT [AppealCase_lpaQuestionnaireSubmitted_df]

ALTER TABLE [dbo].[AppealCase] DROP COLUMN [LPAApplicationReference],
[LPAName],
[addAffectedListedBuilding],
[addChangedListedBuilding],
[addNearbyAppeal],
[affectedListedBuildingNumber],
[affectsListedBuilding],
[appealStatus],
[appealTypeName],
[appealValidDate],
[appealWithdrawnDate],
[appellantCasePublished],
[appellantCompanyName],
[appellantFirstName],
[appellantGreenBelt],
[appellantLastName],
[appellantLinkedCase],
[appellantPhoneNumber],
[appellantPreferHearingDetails],
[appellantPreferInquiryDetails],
[appellantProofEvidenceSubmitted],
[appellantSiteAccess],
[appellantSiteAccessDetails],
[appellantSiteSafety],
[appellantSiteSafetyDetails],
[caseDecisionDate],
[caseDecisionPublished],
[casePublished],
[caseReceived],
[changedListedBuildingNumber],
[changesListedBuilding],
[contactCompanyName],
[contactFirstName],
[contactLastName],
[correctAppealType],
[costsAppliedForIndicator],
[decision],
[developmentDescriptionDetails],
[doesAffectAScheduledMonument],
[greenBelt],
[identifiedOwners],
[informedOwners],
[isAppellant],
[lpaQuestionnairePublished],
[lpaQuestionnaireSubmitted],
[nearbyAppealReference],
[nearbyAppeals],
[newConditions],
[notificationMethod],
[onApplicationDate],
[originalCaseDecisionDate],
[outcome],
[procedure],
[questionnaireDueDate],
[questionnaireReceived],
[receiptDate],
[startDate],
[updateDevelopmentDescription],
[uploadConservation],
[uploadConsultationResponses],
[uploadDefinitiveMapStatement],
[uploadDevelopmentPlanPolicies],
[uploadEmergingPlan],
[uploadEnvironmentalStatement],
[uploadInfrastructureLevy],
[uploadLettersEmails],
[uploadLpaProofEvidence],
[uploadLpaRebuttal],
[uploadLpaStatementDocuments],
[uploadLpaWitnessEvidence],
[uploadLpaWitnessTimings],
[uploadOtherPolicies],
[uploadPlanningOfficerReport],
[uploadPressAdvert],
[uploadRepresentations],
[uploadScreeningDirection],
[uploadScreeningOpinion],
[uploadSiteNotice],
[uploadSupplementaryPlanningDocs],
[uploadTreePreservationOrder],
[uploadWhoNotified];
ALTER TABLE [dbo].[AppealCase] ADD CONSTRAINT [AppealCase_scheduledMonument_df] DEFAULT 0 FOR [scheduledMonument];
ALTER TABLE [dbo].[AppealCase] ADD [allocationBand] INT,
[allocationLevel] NVARCHAR(1000),
[appellantCostsAppliedFor] BIT,
[appellantProcedurePreferenceDetails] NVARCHAR(1000),
[appellantProcedurePreferenceDuration] INT,
[applicationDate] DATETIME2,
[applicationDecision] NVARCHAR(1000),
[applicationDecisionDate] DATETIME2,
[applicationReference] NVARCHAR(1000),
[caseCompletedDate] DATETIME2,
[caseCreatedDate] DATETIME2 NOT NULL,
[caseDecisionOutcomeDate] DATETIME2,
[caseDecisionPublishedDate] DATETIME2,
[caseExtensionDate] DATETIME2,
[caseId] INT,
[caseOfficerId] NVARCHAR(1000),
[caseProcedure] NVARCHAR(1000),
[caseSpecialisms] NVARCHAR(max),
[caseStartedDate] DATETIME2,
[caseStatus] NVARCHAR(1000) NOT NULL,
[caseSubmissionDueDate] DATETIME2,
[caseSubmittedDate] DATETIME2 NOT NULL,
[caseTransferredDate] DATETIME2,
[caseUpdatedDate] DATETIME2,
[caseValidationDate] DATETIME2,
[caseValidationIncompleteDetails] NVARCHAR(max),
[caseValidationInvalidDetails] NVARCHAR(max),
[caseValidationOutcome] NVARCHAR(1000),
[caseWithdrawnDate] DATETIME2,
[changedDevelopmentDescription] BIT,
[enforcementNotice] BIT,
[floorSpaceSquareMetres] DECIMAL(32,16),
[inConservationArea] BIT,
[inspectorId] NVARCHAR(1000),
[isCorrectAppealType] BIT,
[isGreenBelt] BIT,
[knowsAllOwners] NVARCHAR(1000),
[lpaCostsAppliedFor] BIT,
[lpaProcedurePreferenceDetails] NVARCHAR(1000),
[lpaProcedurePreferenceDuration] INT,
[lpaQuestionnaireCreatedDate] DATETIME2,
[lpaQuestionnaireDueDate] DATETIME2,
[lpaQuestionnaireValidationDetails] NVARCHAR(max),
[lpaQuestionnaireValidationOutcome] NVARCHAR(1000),
[lpaQuestionnaireValidationOutcomeDate] DATETIME2,
[originalDevelopmentDescription] NVARCHAR(1000),
[ownersInformed] BIT,
[siteAccessDetails] NVARCHAR(max),
[siteSafetyDetails] NVARCHAR(max),
[transferredCaseClosedDate] DATETIME2;

-- AlterTable
ALTER TABLE [dbo].[NeighbouringAddress] ADD [county] NVARCHAR(1000),
[siteAccessDetails] NVARCHAR(max),
[siteSafetyDetails] NVARCHAR(max);

-- AlterTable
ALTER TABLE [dbo].[SubmissionLinkedCase] DROP COLUMN [appealCaseId];

-- CreateTable
CREATE TABLE [dbo].[AppealCaseRelationship] (
    [id] INT NOT NULL IDENTITY(1,1),
    [type] NVARCHAR(1000) NOT NULL CONSTRAINT [AppealCaseRelationship_type_df] DEFAULT 'nearby',
    [caseReference] NVARCHAR(1000) NOT NULL,
    [caseReference2] NVARCHAR(1000) NOT NULL,
    CONSTRAINT [AppealCaseRelationship_pkey] PRIMARY KEY CLUSTERED ([id])
);

-- CreateTable
CREATE TABLE [dbo].[CaseType] (
    [id] INT NOT NULL,
    [key] NVARCHAR(1000) NOT NULL,
    [type] NVARCHAR(1000) NOT NULL,
    [processCode] NVARCHAR(1000),
    CONSTRAINT [CaseType_pkey] PRIMARY KEY CLUSTERED ([id]),
    CONSTRAINT [CaseType_key_key] UNIQUE NONCLUSTERED ([key]),
    CONSTRAINT [CaseType_type_key] UNIQUE NONCLUSTERED ([type]),
    CONSTRAINT [CaseType_processCode_key] UNIQUE NONCLUSTERED ([processCode])
);

-- CreateTable
CREATE TABLE [dbo].[CaseStatus] (
    [key] NVARCHAR(1000) NOT NULL,
    [name] NVARCHAR(1000) NOT NULL,
    CONSTRAINT [CaseStatus_key_key] UNIQUE NONCLUSTERED ([key]),
    CONSTRAINT [CaseStatus_name_key] UNIQUE NONCLUSTERED ([name])
);

-- CreateTable
CREATE TABLE [dbo].[CaseDecisionOutcome] (
    [key] NVARCHAR(1000) NOT NULL,
    [name] NVARCHAR(1000) NOT NULL,
    CONSTRAINT [CaseDecisionOutcome_key_key] UNIQUE NONCLUSTERED ([key]),
    CONSTRAINT [CaseDecisionOutcome_name_key] UNIQUE NONCLUSTERED ([name])
);

-- CreateTable
CREATE TABLE [dbo].[CaseValidationOutcome] (
    [key] NVARCHAR(1000) NOT NULL,
    [name] NVARCHAR(1000) NOT NULL,
    CONSTRAINT [CaseValidationOutcome_key_key] UNIQUE NONCLUSTERED ([key]),
    CONSTRAINT [CaseValidationOutcome_name_key] UNIQUE NONCLUSTERED ([name])
);

-- CreateTable
CREATE TABLE [dbo].[LPAQuestionnaireValidationOutcome] (
    [key] NVARCHAR(1000) NOT NULL,
    [name] NVARCHAR(1000) NOT NULL,
    CONSTRAINT [LPAQuestionnaireValidationOutcome_key_key] UNIQUE NONCLUSTERED ([key]),
    CONSTRAINT [LPAQuestionnaireValidationOutcome_name_key] UNIQUE NONCLUSTERED ([name])
);

-- CreateTable
CREATE TABLE [dbo].[ProcedureType] (
    [key] NVARCHAR(1000) NOT NULL,
    [name] NVARCHAR(1000) NOT NULL,
    CONSTRAINT [ProcedureType_pkey] PRIMARY KEY CLUSTERED ([key]),
    CONSTRAINT [ProcedureType_key_key] UNIQUE NONCLUSTERED ([key]),
    CONSTRAINT [ProcedureType_name_key] UNIQUE NONCLUSTERED ([name])
);

-- CreateTable
CREATE TABLE [dbo].[ListedBuilding] (
    [reference] NVARCHAR(1000) NOT NULL,
    [name] NVARCHAR(1000),
    [listedBuildingGrade] NVARCHAR(1000),
    CONSTRAINT [ListedBuilding_pkey] PRIMARY KEY CLUSTERED ([reference]),
    CONSTRAINT [ListedBuilding_reference_key] UNIQUE NONCLUSTERED ([reference])
);

-- CreateTable
CREATE TABLE [dbo].[AppealCaseListedBuilding] (
    [id] INT NOT NULL IDENTITY(1,1),
    [caseReference] NVARCHAR(1000) NOT NULL,
    [listedBuildingReference] NVARCHAR(1000) NOT NULL,
    CONSTRAINT [AppealCaseListedBuilding_pkey] PRIMARY KEY CLUSTERED ([id])
);

-- CreateTable
CREATE TABLE [dbo].[LPANotificationMethods] (
    [key] NVARCHAR(1000) NOT NULL,
    [name] NVARCHAR(1000) NOT NULL,
    CONSTRAINT [LPANotificationMethods_pkey] PRIMARY KEY CLUSTERED ([key]),
    CONSTRAINT [LPANotificationMethods_key_key] UNIQUE NONCLUSTERED ([key]),
    CONSTRAINT [LPANotificationMethods_name_key] UNIQUE NONCLUSTERED ([name])
);

-- CreateTable
CREATE TABLE [dbo].[AppealCaseLpaNotificationMethod] (
    [id] INT NOT NULL IDENTITY(1,1),
    [caseReference] NVARCHAR(1000) NOT NULL,
    [lPANotificationMethodsKey] NVARCHAR(1000),
    CONSTRAINT [AppealCaseLpaNotificationMethod_pkey] PRIMARY KEY CLUSTERED ([id])
);

-- AddForeignKey
ALTER TABLE [dbo].[AppealCase] ADD CONSTRAINT [AppealCase_appealTypeCode_fkey] FOREIGN KEY ([appealTypeCode]) REFERENCES [dbo].[CaseType]([processCode]) ON DELETE SET NULL ON UPDATE CASCADE;

-- AddForeignKey
ALTER TABLE [dbo].[AppealCase] ADD CONSTRAINT [AppealCase_caseStatus_fkey] FOREIGN KEY ([caseStatus]) REFERENCES [dbo].[CaseStatus]([key]) ON DELETE NO ACTION ON UPDATE CASCADE;

-- AddForeignKey
ALTER TABLE [dbo].[AppealCase] ADD CONSTRAINT [AppealCase_caseProcedure_fkey] FOREIGN KEY ([caseProcedure]) REFERENCES [dbo].[ProcedureType]([key]) ON DELETE SET NULL ON UPDATE CASCADE;

-- AddForeignKey
ALTER TABLE [dbo].[AppealCase] ADD CONSTRAINT [AppealCase_caseDecisionOutcome_fkey] FOREIGN KEY ([caseDecisionOutcome]) REFERENCES [dbo].[CaseDecisionOutcome]([key]) ON DELETE SET NULL ON UPDATE CASCADE;

-- AddForeignKey
ALTER TABLE [dbo].[AppealCase] ADD CONSTRAINT [AppealCase_caseValidationOutcome_fkey] FOREIGN KEY ([caseValidationOutcome]) REFERENCES [dbo].[CaseValidationOutcome]([key]) ON DELETE SET NULL ON UPDATE CASCADE;

-- AddForeignKey
ALTER TABLE [dbo].[AppealCase] ADD CONSTRAINT [AppealCase_lpaQuestionnaireValidationOutcome_fkey] FOREIGN KEY ([lpaQuestionnaireValidationOutcome]) REFERENCES [dbo].[LPAQuestionnaireValidationOutcome]([key]) ON DELETE SET NULL ON UPDATE CASCADE;

-- AddForeignKey
ALTER TABLE [dbo].[AppealCaseListedBuilding] ADD CONSTRAINT [AppealCaseListedBuilding_caseReference_fkey] FOREIGN KEY ([caseReference]) REFERENCES [dbo].[AppealCase]([caseReference]) ON DELETE NO ACTION ON UPDATE CASCADE;

-- AddForeignKey
ALTER TABLE [dbo].[AppealCaseListedBuilding] ADD CONSTRAINT [AppealCaseListedBuilding_listedBuildingReference_fkey] FOREIGN KEY ([listedBuildingReference]) REFERENCES [dbo].[ListedBuilding]([reference]) ON DELETE NO ACTION ON UPDATE CASCADE;

-- AddForeignKey
ALTER TABLE [dbo].[AppealCaseLpaNotificationMethod] ADD CONSTRAINT [AppealCaseLpaNotificationMethod_caseReference_fkey] FOREIGN KEY ([caseReference]) REFERENCES [dbo].[AppealCase]([caseReference]) ON DELETE NO ACTION ON UPDATE CASCADE;

-- AddForeignKey
ALTER TABLE [dbo].[AppealCaseLpaNotificationMethod] ADD CONSTRAINT [AppealCaseLpaNotificationMethod_lPANotificationMethodsKey_fkey] FOREIGN KEY ([lPANotificationMethodsKey]) REFERENCES [dbo].[LPANotificationMethods]([key]) ON DELETE SET NULL ON UPDATE CASCADE;

COMMIT TRAN;

END TRY
BEGIN CATCH

IF @@TRANCOUNT > 0
BEGIN
    ROLLBACK TRAN;
END;
THROW

END CATCH
